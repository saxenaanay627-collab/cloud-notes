<!DOCTYPE html>
<html>
<head>
    <title>Cloud Notes</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input { width: 70%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 10px; background: #28a745; color: white; border: none; cursor: pointer; border-radius: 4px; }
        ul { list-style: none; padding: 0; margin-top: 20px; }
        li { background: #eee; margin-bottom: 5px; padding: 10px; display: flex; justify-content: space-between; align-items: center; border-radius: 4px; }
        .delete-btn { background: #dc3545; padding: 5px 10px; font-size: 12px; }
    </style>
</head>
<body>
<div class="container">
    <h2>My Cloud Notes</h2>
    <input type="text" id="noteInput" placeholder="Write a note...">
    <button onclick="addNote()">Add</button>
    <ul id="notesList"></ul>
</div>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, deleteDoc, doc, serverTimestamp } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  const firebaseConfig = {
    apiKey: "AIzaSyA-_GzHuoy_UY9m7q4jQSRlL-aJJc1yu-I",
    authDomain: "notes-bcb01.firebaseapp.com",
    projectId: "notes-bcb01",
    storageBucket: "notes-bcb01.firebasestorage.app",
    messagingSenderId: "540151768126",
    appId: "1:540151768126:web:11acbb3497fadda846dd6f",
    measurementId: "G-VCJZD6S4CS"
  };
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const notesCol = collection(db, "notes");
  window.addNote = async () => {
    const input = document.getElementById('noteInput');
    if (input.value) {
      await addDoc(notesCol, {
        text: input.value,
        timestamp: serverTimestamp()
      });
      input.value = '';
    }
  };
  window.deleteNote = async (id) => {
    await deleteDoc(doc(db, "notes", id));
  };
  const q = query(notesCol, orderBy("timestamp", "desc"));
  onSnapshot(q, (snapshot) => {
    const list = document.getElementById('notesList');
    list.innerHTML = '';
    snapshot.forEach((doc) => {
      const data = doc.data();
      list.innerHTML += `
        <li>
          ${data.text} 
          <button class="delete-btn" onclick="deleteNote('${doc.id}')">Delete</button>
        </li>`;
    });
  });
</script>
</body>
</html>
